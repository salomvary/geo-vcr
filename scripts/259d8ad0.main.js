function action(a){window[a.target.name]()}function getCurrentPosition(){startLog("getCurrentPosition",options()),navigator.geolocation.getCurrentPosition(function(a){success(a),endLog()},error,options())}function watchPosition(){startLog("watchPosition",options()),watch=navigator.geolocation.watchPosition(success,error,options())}function clearWatch(){navigator.geolocation.clearWatch(watch),endLog()}function startLog(a,b){log={method:a,options:b,userAgent:navigator.userAgent,timestamp:(new Date).toString(),positions:[]}}function endLog(){localStorage["log-"+log.timestamp]=JSON.stringify(log)}function showDump(){dump.innerHTML=JSON.stringify(log,null," ")}function options(){var a=document.forms.options,b={enableHighAccuracy:a.enableHighAccuracy.checked};return["timeout","maximumAge"].forEach(function(c){""!==a[c].value&&(b[c]=parseInt(a[c].value,10))}),b}function success(a){console.log("success",a),out.innerHTML=JSON.stringify(a,null," "),log.positions.push(a),centerMap(a)}function error(a){console.log("error",a),log.positions.push(a),out.innerHTML=JSON.stringify(a,null," ")}function centerMap(a){var b=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);map.setCenter(b),marker.setPosition(b)}function getStorage(){var a={};for(var b in localStorage)-1!=b.indexOf("log-")&&(a[b]=JSON.parse(localStorage[b]));return a}var watch,log,out=document.getElementById("out"),dump=document.getElementById("dump"),mapOptions={zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP},map=new google.maps.Map(document.getElementById("map"),mapOptions),marker=new google.maps.Marker({map:map});[].concat.apply([],document.querySelectorAll("button")).forEach(function(a){a.addEventListener("click",action,!1)});